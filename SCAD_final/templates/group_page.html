<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
    <head>
		<meta charset="utf-8">
        <title>Study Group</title>
        {% load static %}
        <link href="{% static 'stylesheets/bootstrap.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'stylesheets/group.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'stylesheets/fullcalendar.css' %}" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!--link href="{% static 'stylesheets/jquery.offcanvas.min.css' %}" rel="stylesheet" type="text/css"-->
	    <link href="{% static 'stylesheets/simple-sidebar.css' %}" rel="stylesheet">
        <script src="{% static 'javascript/js_cookie.js'  %}"></script>

        <script src="{% static 'javascript/jquery.min.js' %}"></script>
        <script src="{% static 'javascript/moment.min.js' %}"></script>
        <script src="{% static 'javascript/fullcalendar.js' %}"></script>
        <script src="{% static 'javascript/bootstrap.js' %}"></script>
        <style>
            .offcanvas-inner { min-height:100%;}
            /*
            nav { background-color:#AED3D7; color:#000000; height:100%;}
            nav ul, nav li { list-style:none; margin:0; padding:0;}
            nav li { margin:10px 0; padding:20px; border-bottom:1px solid #F0F8FF;}
            nav li a { color:#3c3a3a;}*/
        </style>   
        <script type="text/javascript">
            $(document).ready(function() {
                // page is now ready, initialize the calendar...
                $('#calendar').fullCalendar({
                    // put your options and callbacks here
                    events: [
                        {
                            title  : 'event1',
                            start  : '2015-12-01'
                        },
                        {
                            title  : 'event2',
                            start  : '2015-12-05',
                            end    : '2015-12-07'
                        },
                        {
                            title  : 'event3',
                            start  : '2015-12-09T12:30:00',
                            allDay : false // will make the time show
                        }
                    ],
                    eventClick: function(calEvent, jsEvent, view) {

                        alert('Event: ' + calEvent.title);

                        // change the border color just for fun
                        $(this).css('border-color', 'red');

                    }                                               
                })

            });
            function creategroup_submit() {
	            check_group_name = $('#group_name').val();
	            check_group_intro = $('#intro').val();
	            nosubmit = 0;
	            if(check_group_intro =='') {
		            $('#introdiv').attr('class','form-group has-error');
		            nosubmit =1;
	            } else {
		            $('#introdiv').attr('class','form-group');
	            }
	            if(check_group_name=='') {
		            $('#namediv').attr('class','form-group has-error');
		            nosubmit =1;
	            } else {
		            $('#namediv').attr('class','form-group');
	            }
	            if(nosubmit==1)return false;

	            creator_id = Cookies.get('user_id');
	            group_name = document.getElementById("group_name").value;
	            intro = document.getElementById("intro").value;
	            finished_time = document.getElementById("finished_time_date").value;

	            if(document.getElementById("private_op1").checked) {
		            private = 0;
	            } else {
		            private = 1;
	            }

	            date = Date.now();
	            group_id = creator_id + date;
	            member_limit = parseInt(document.getElementsByName("member_limit")[0].value);
	            $.post( "/index/", { group_id : group_id, group_name : group_name,  member_limit :member_limit,intro:intro,private:private,creator_id:creator_id ,finished_time:finished_time})
			            .then(function () {
				            window.location = '/group/'+group_id;
			            });
            }
            function getMyInfoURL(){
                user_id = Cookies.get('user_id');
                //alert(user_id);
                window.location = '/user/'+user_id;
            }

            function Group_Member_inf(){
                $('#myContent').empty();
                $.get('/group/{{ group_page_data.group_id }}/member_inf/', function(data){
                    console.log(data);
                });

            }
        </script>
    </head>
    <body>

        <!-- Navigation Bar -->
        <nav class="navbar navbar-inverse navbar-fixed-top" id="NavBar">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a href="/index/" class="navbar-brand" style="color: #fff; border: #000 1px;"><b>Study Group</b></a>
                </div>
				<div class="collapse navbar-collapse">
					<ul class="nav navbar-nav navbar-left navtabs">
						<li role="presentation" class="active"><a href="#">News</a></li>
						<li role="presentation"><a href="#">Schedule</a></li>
						<li role="presentation"><a href="#">Materials</a></li>
						<li role="presentation"><a href="#">Thoughts</a></li>
						<li role="presentation"><a href="#" onclick="Group_Member_inf();">Members</a></li>
					</ul>


					<ul class="nav navbar-nav navbar-right">
						<li><a href="#" onclick="getMyInfoURL();">My Information</a></li>
						<li><a href="#">Log Out</a></li>
					</ul>
					<button type="button" class="btn btn-primary navbar-btn navbar-right" id="create_group_button" data-toggle="modal" data-target="#create_group_Modal">Create Group</button>

				</div>
            </div>
        </nav>

        <header>
	        <div class="exp">
                <b>LV.20</b>
                <div id="user_exp">
	                <div class="progress">
		                <div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width:70%">
                            <span class="sr-only">70% Complete</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <br class="space">

        {% if group_page_data %}
	        {% csrf_token %}
	        <div id="wrapper">
		        <!-- Sidebar Wrapper -->
		        <div id="sidebar-wrapper" style="margin-right: 0px;">
		            <div style="padding: 20px;">
			            <h3>{{group_page_data.group_name}}</h3>
			            <p>{{group_page_data.intro}}</p>
			            <br>
			            <p>Create at {{group_page_data.created_time}}</p>
			            <p>Members: {{group_page_data.member_num}}</p>
			            {% if group_page_data.private == 0 %}
					        <p>Public group</p>
				        {% else %}
					        <p>Private group</p>
				        {% endif %}
			        </div>
		        </div>
	            <button type="button" class="btn btn-default" id="menu-toggle" aria-label="Left Chevron" style="margin-left: 0px;">
                    <span class="glyphicon glyphicon-chevron-left" id="chevLeft" aria-hidden="true"></span>
				</button>
	        </div>
        {% endif %}

		<!-- Container -->
        <div class="container">
	        <div id="calendar"></div>
        </div>

        <!-- Modal -->
		<div id="create_group_Modal" class="modal fade" role="dialog">
			<div class="modal-dialog">
				<!-- Modal content-->
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<div id="namediv">
							<h4 class="modal-title">Group Name</h4>
							<input type="text" class="form-control" name="group_name" id="group_name" placeholder="要將讀書會取作什麼呢？">
								</div>
					</div>
					<div class="modal-body">
						<div id="introdiv">
							<label>Introduction</label>
							<textarea class="form-control" name="intro" id="intro" rows="3"></textarea>
							<hr>
						</div>
						<div class="row">
							<div class="col-md-4 col-md-offset-2">
								<label>隱私性</label>
								<div class="radio">
									<input type="radio" name="private" id="private_op1"  value="0" checked>public
									</br>
									<input type="radio" name="private" id="private_op2"  value="1">private
								</div>
							</div>
							<div id="timediv" class="col-md-4">
								<label>結束時間</label>
								<div>
									<input id="finished_time_date" type="date">
								</div>
							</div>
						</div>

						<div id="clear" style="clear: both"></div>

						<hr>
						<div id="member_limitdiv">
							<fieldset>
								<label for="sel1">人數上限 (0為無限制)</label>
								<select name="member_limit" class="form-control" id="sel1">
									<option>0</option>
									<option>5</option>
									<option>10</option>
									<option>15</option>
									<option>20</option>
								</select>
							</fieldset>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						<button type="button" class="btn btn-primary" onclick="creategroup_submit()">Create</button>
					</div>
				</div>
			</div>
		</div>

        <!-- Menu Toggle Script -->
        <script>
	        $("#menu-toggle").click(function(e) {
		        e.preventDefault();
		        $("#wrapper").toggleClass("toggled");
	        });
        </script>

        <footer>
	        <ul>
		        <li class="copyright" type="none" align="center" style="color: #eee;vertical-align:middle;">Copyright © 2015 Study Group ALL Rights Reserved.</li>
	        </ul>
	        <br clear="space">
        </footer>
        
        <!--script src="{% static 'javascript/jquery.offcanvas.min.js' %}"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.3/velocity.min.js"></script>

        <script>
        var $el = $("#offcanvas").offcanvas();

        $(".js-toggle-offcanvas").on("click", function() {
            $el.offcanvas("toggle");
        });
        </script-->
    </body>
</html>